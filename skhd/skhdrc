#####################
# MANIPULATE SPACES #
#####################

# Stack mode

hyper - x :             yabai -m space --layout bsp

# Switch spaces
hyper - q :              mouse_display=$(yabai -m query --displays --display mouse | jq .index) && \
                        yabai -m display --focus $mouse_display && \
                        yabai -m space --focus "$(yabai -m query --spaces --display \
                        | jq 'nth(index(map(select(.focused == 1))) - 1).index')"


hyper - s :             mouse_display=$(yabai -m query --displays --display mouse | jq .index) && \
                        yabai -m display --focus $mouse_display && \
                        yabai -m space --focus "$(yabai -m query --spaces --display \
                        | jq 'reverse | nth(index(map(select(.focused == 1))) - 1).index')"

# Create space
hyper - t :        yabai -m space --create && \
                        yabai -m space --focus last

# Delete space
hyper - w :        destroy=$(yabai -m query --spaces --space | jq .index) && \
                        (yabai -m space --focus next || yabai -m space --focus prev) && \
                        yabai -m space $destroy --destroy



######################
# MANIPULATE WINDOWS #
######################


# make active window floating
ctrl - f :              yabai -m window --toggle float && \
                        yabai -m window --move abs:100:100 && \
                        yabai -m window --resize abs:1200:600

# switch focus to next window
cmd - tab :             yabai -m window --focus next || \
                        yabai -m window --focus first

#ctrl + shift - tab :   yabai -m window --focus prev || \
#                       yabai -m window --focus last

# Resize window to full screen
ctrl - x :        yabai -m window --toggle zoom-fullscreen

# Resize window under mouse to full screen
ctrl + cmd + alt - x :  under=$(yabai -m query --windows --window mouse | jq .id) && \
                        yabai -m window --focus $under && \
                        yabai -m window --toggle zoom-fullscreen && \
                        yabai -m window --toggle topmost



# Swap next
ctrl - w :        yabai -m window --swap next || \
                        yabai -m window --swap first

# Swap NSWE
#ctrl - z :        yabai -m window --swap north
#ctrl - s :        yabai -m window --swap south
#ctrl - q :        yabai -m window --swap west
#ctrl - d :        yabai -m window --swap east

# Move window left/right a space
ctrl - q :             (yabai -m window --space prev && \
                        yabai -m space --focus prev) || \
                       (yabai -m window --space last && \
                        yabai -m space --focus last)

ctrl - s :             (yabai -m window --space next && \
                        yabai -m space --focus next) || \
                       (yabai -m window --space first && \
                        yabai -m space --focus first)

# Show Desktop
ctrl - d :              yabai -m space --toggle show-desktop
